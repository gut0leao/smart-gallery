#!/bin/bash
# Script para mapear um diretório local do host para o diretório backups na raiz do projeto
# Uso: ddev map_backup_dir /caminho/do/diretorio/dos/backups
# Recomanda-se que o diretório local do host seja um 
# diretório sincronizado com algum serviço de nuvem, como o OneDrive.

set -e

if [ -z "$1" ]; then
  echo "⚠️ Uso: ddev map_backup_dir /caminho/do/diretorio/dos/backups"
  exit 1
fi

ORIG_DIR="$1"
DEST_DIR="$(pwd)/backups"

# Remove symlink antigo, se existir
if [ -L "$DEST_DIR" ]; then
  rm "$DEST_DIR"
fi

# Cria symlink
ln -sfn "$ORIG_DIR" "$DEST_DIR"

echo "✅ Diretório de backup mapeado: $ORIG_DIR -> $DEST_DIR"
